sum(rate(std_grpc_server_handled_total{job="be/yid",grpc_method=~"ListFieldValues|ListPermResource|CheckUserOperatePage|ListAuthZResources", grpc_code="Unknown"}[5m]))
sum(rate(std_grpc_server_handled_total{job="be/yid",grpc_method=~"ListFieldValues|ListPermResource|CheckUserOperatePage|ListAuthZResources", grpc_code="OK"}[5m]))
sum(rate(std_requests_total{job="be/yid", code="200",method=~"GET|POST",url=~"/api/v2/user/publickey|/api/v2/user/login|/api/v2/user/verify/totp|/api/v2/user/password/change|/api/v2/email/password|/api/v2/password/auth|/api/v2/password/reset"}[5m]))
sum(rate(std_grpc_server_handled_total{job="be/yid", grpc_code="Unknown",grpc_method=~"GetEmployee|ListEmployee|GetDepartment|ListDepartment|GetTeam|ListTeam|ListSupervisor|IsDeptLeader|GetDepartTree|GetEmployeeDepartTree|ListUserNameByEmpID|ListAuthZTeamsByUserName|ListWeChatDeptIDByDeptID|ListJiesuanBusinessDeptMember|ListAllInternalEmployees|IsEmployeeBelongToDept|ListApproveAuthEmp|ListApproveAuthDept|ListApproveBackupEmp"}[5m])) 
sum(rate(std_grpc_server_handled_total{job="be/yid", grpc_code="OK",grpc_method=~"GetEmployee|ListEmployee|GetDepartment|ListDepartment|GetTeam|ListTeam|ListSupervisor|IsDeptLeader|GetDepartTree|GetEmployeeDepartTree|ListUserNameByEmpID|ListAuthZTeamsByUserName|ListWeChatDeptIDByDeptID|ListJiesuanBusinessDeptMember|ListAllInternalEmployees|IsEmployeeBelongToDept|ListApproveAuthEmp|ListApproveAuthDept|ListApproveBackupEmp"}[5m])) 
sum(rate(std_requests_total{job="be/yid", code="200",method="GET",url=~"/api/v1/employee/:empID|/api/v1/employees|/api/v1/dept|/api/v1/depts|/api/v1/team/:teamID|/api/v1/teams|/api/v1/supervisors/:empIDs|/api/v1/dept-tree|/api/v1/emplist"}[5m]))
1- ((sum(increase(std_requests_total{job="be/yid",code="200",environment="prod", bizcode="6000"}[5m]) or increase(std_requests_total{job="$service",environment="be/yid", code=~"5.."}[5m]))  or  vector(0)) /  sum(increase(std_requests_total{job="be/yid",environment="prod"}[5m])))
1-sum(increase(std_grpc_server_handled_total{job="be/yid",biz_code="6000",environment="prod",grpc_code=~"Unknown|OK"}[5m]) or increase(std_grpc_server_handled_total{job="be/yid",environment="prod",grpc_code!~"Unknown|OK"}[5m]))/sum(increase(std_grpc_server_handled_total{job="be/yid",environment="prod"}[5m])) or vector(1)
sum(rate(std_requests_total{job="be/yid",code=~"2..",environment="prod"}[5m]))
sum(rate(std_requests_total{job="be/yid",code=~"3..",environment="prod"}[5m]))
sum(rate(std_requests_total{job="be/yid",code=~"4..",environment="prod"}[5m]))
(1-sum(increase(std_grpc_server_handled_total{job="be/yid",biz_code="6000",grpc_code=~"Unknown|OK",grpc_method=~"ListFieldValues|ListPermResource|CheckUserOperatePage|ListAuthZResources"}[2m]) or increase(std_grpc_server_handled_total{job="be/yid",biz_code="6000",grpc_method=~"ListFieldValues|ListPermResource|CheckUserOperatePage|ListAuthZResources"}[2m]) or vector(0))/sum(increase(std_grpc_server_handled_total{job="be/yid",grpc_method=~"ListFieldValues|ListPermResource|CheckUserOperatePage|ListAuthZResources"}[2m])))*100
(1-sum(increase(std_grpc_server_handled_total{job="be/yid",biz_code="6000",grpc_code=~"Unknown|OK",grpc_method=~"GetEmployee|ListEmployee|GetDepartment|ListDepartment|GetTeam|ListTeam|ListSupervisor|IsDeptLeader|GetDepartTree|GetEmployeeDepartTree|ListUserNameByEmpID|ListAuthZTeamsByUserName|ListWeChatDeptIDByDeptID|ListJiesuanBusinessDeptMember|ListAllInternalEmployees|IsEmployeeBelongToDept|ListApproveAuthEmp|ListApproveAuthDept|ListApproveBackupEmp"}[2m]) or increase(std_grpc_server_handled_total{job="be/yid",biz_code="6000",grpc_method=~"GetEmployee|ListEmployee|GetDepartment|ListDepartment|GetTeam|ListTeam|ListSupervisor|IsDeptLeader|GetDepartTree|GetEmployeeDepartTree|ListUserNameByEmpID|ListAuthZTeamsByUserName|ListWeChatDeptIDByDeptID|ListJiesuanBusinessDeptMember|ListAllInternalEmployees|IsEmployeeBelongToDept|ListApproveAuthEmp|ListApproveAuthDept|ListApproveBackupEmp"}[2m]) or vector(0))/sum(increase(std_grpc_server_handled_total{job="be/yid",grpc_method=~"GetEmployee|ListEmployee|GetDepartment|ListDepartment|GetTeam|ListTeam|ListSupervisor|IsDeptLeader|GetDepartTree|GetEmployeeDepartTree|ListUserNameByEmpID|ListAuthZTeamsByUserName|ListWeChatDeptIDByDeptID|ListJiesuanBusinessDeptMember|ListAllInternalEmployees|IsEmployeeBelongToDept|ListApproveAuthEmp|ListApproveAuthDept|ListApproveBackupEmp"}[2m])))*100
sum(increase(std_request_duration_seconds_bucket{le='0.5',job="be/yid",method="GET",url=~"/api/v1/employee/:empID|/api/v1/employees|/api/v1/dept|/api/v1/depts|/api/v1/team/:teamID|/api/v1/teams|/api/v1/supervisors/:empIDs|/api/v1/dept-tree|/api/v1/emplist"}[2m]))  by(job) / sum(increase(std_request_duration_seconds_bucket{le='+Inf',job="be/yid",method="GET",url=~"/api/v1/employee/:empID|/api/v1/employees|/api/v1/dept|/api/v1/depts|/api/v1/team/:teamID|/api/v1/teams|/api/v1/supervisors/:empIDs|/api/v1/dept-tree|/api/v1/emplist"}[2m]))  by(job) *100
(1- (sum(increase(std_requests_total{job="be/yid",code="200",bizcode="6000",method=~"GET|POST",url=~"/sso/oauth2/auth|/sso/oauth2/token|/sso/oauth2/revoke|sso/userinfo|/api/v2/user/publickey|/api/v2/user/login|/api/v2/user/verify/totp|/api/v2/user/password/change|/api/v2/email/password|/api/v2/password/auth|/api/v2/password/reset"}[2m]) or increase(std_requests_total{job="be/yid",code=~"5..",method=~"GET|POST",url=~"/sso/oauth2/auth|/sso/oauth2/token|/sso/oauth2/revoke|sso/userinfo|/api/v2/user/publickey|/api/v2/user/login|/api/v2/user/verify/totp|/api/v2/user/password/change|/api/v2/email/password|/api/v2/password/auth|/api/v2/password/reset"}[2m])) or vector(0)) / sum(increase(std_requests_total{job="be/yid",method=~"GET|POST",url=~"/sso/oauth2/auth|/sso/oauth2/token|/sso/oauth2/revoke|sso/userinfo|/api/v2/user/publickey|/api/v2/user/login|/api/v2/user/verify/totp|/api/v2/user/password/change|/api/v2/email/password|/api/v2/password/auth|/api/v2/password/reset"}[2m])))*100
sum(increase(std_grpc_server_handling_seconds_bucket{le='0.5',job="be/yid",grpc_method=~"ListPermResource|CheckUserOperatePage|ListAuthZResources"}[2m])) by (job) / sum(increase(std_grpc_server_handling_seconds_bucket{le='+Inf',job="be/yid",grpc_method=~"ListPermResource|CheckUserOperatePage|ListAuthZResources"}[2m])) by (job) *100
yid_login_rate{exported_job="yid_login",instance="172.16.17.3:9092",job="push-gateway"}
